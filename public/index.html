<!DOCTYPE html>
<html>
<head>
    <title>OpenWebConvert</title>
	
	
	<link href="https://fonts.cdnfonts.com/css/dylan" rel="stylesheet">
	<link href="https://fonts.cdnfonts.com/css/ubuntu-mono" rel="stylesheet">
	
	<!-- BeerCSS 
	<link href="https://cdn.jsdelivr.net/npm/beercss@3.4.11/dist/cdn/beer.min.css" rel="stylesheet">
	<script type="module" src="https://cdn.jsdelivr.net/npm/beercss@3.4.11/dist/cdn/beer.min.js"></script>
	<script type="module" src="https://cdn.jsdelivr.net/npm/material-dynamic-colors@1.1.0/dist/cdn/material-dynamic-colors.min.js"></script>
	-->
</head>
<body>
    <h1>OpenWebConvert</h1>
	<h3>Basic clone of those "convert file1 to file2" sites</h3>
	<hr class="rounded">
	
	<br>
    <form action="http://localhost:3000/convert" method="post" enctype="multipart/form-data">
        <label for="file">Select file:</label>
        <input type="file" id="file" name="file" accept=".jpg,.jpeg,.png,.webp,.mp3,.wav,.flac,.mp4,.avi,.mkv" onchange="updateFormats()"><br>
        <label for="format">Select output format:</label>
        <select id="format" name="format">
            <option value="jpg">JPG</option>
            <option value="png">PNG</option>
            <option value="webp">WEBP</option>
            <option value="mp3">MP3</option>
            <option value="wav">WAV</option>
            <option value="flac">FLAC</option>
			<option value="mp4">MP4</option>
			<option value="avi">AVI</option>
			<option value="mkv">MKV</option>
			<option value="txt">TXT</option>
        </select><br>
        <input type="submit" value="Convert">
    </form>
	
	<hr class="rounded">
	<p>This site was made by burandby as a basic project that converts files to different formats.
	This project is open-source and available on <a href="https://github.com/burandby/openwebconvert">my Github<a/></p>
	
	<style>
	/* 
	Rounded divider
	https://www.w3schools.com/howto/howto_css_dividers.asp
	*/
	hr.rounded {
	  border-top: 3px solid #bbb;
	  border-radius: 1px;
	}
	h1 {
		font-family: 'Dylan', sans-serif;
	}
	body {
		font-family: 'Ubuntu Mono', sans-serif;
	}
	</style>
	<script>
        function updateFormats() {
            const fileInput = document.getElementById('file');
            const formatSelect = document.getElementById('format');
            const fileExtension = fileInput.value.split('.').pop().toLowerCase();

            const imageFormats = ['jpg', 'png', 'webp'];
            const audioFormats = ['mp3', 'wav', 'flac'];
			const videoFormats = ['mp4', 'avi', 'mkv'];

            let options;
            if (imageFormats.includes(fileExtension)) {
                options = imageFormats;
            } else if (audioFormats.includes(fileExtension)) {
                options = audioFormats;
            } else if (videoFormats.includes(fileExtension)) {
				options = videoFormats;
			} else if (fileExtension == 'pdf') {
				options = ['txt'];
			} else {
                options = [];
            }

            formatSelect.innerHTML = '';
            for (const option of options) {
                const optionElement = document.createElement('option');
                optionElement.value = option;
                optionElement.text = option.toUpperCase();
                formatSelect.appendChild(optionElement);
            }
        }
    </script>
</body>
</html>
